{% extends "PfaMainBundle::layout.html.twig" %}
{% block title %}
	Recherche D'une Collocation - {{ parent() }}
{% endblock %}
{% block body_decoration 'class="page-sub-page page-property-detail"'%}
{% block body %}
	<!-- _________________________________________________________________________________________________________________ -->
	<!-- Breadcrumb -->
	<div class="container">
		<ol class="breadcrumb">
			<li><a href="#">Home</a></li>
			<li class="active">Recherche D'une Collocation</li>
		</ol>
	</div>
	<!-- end Breadcrumb -->
	<!-- _________________________________________________________________________________________________________________ -->
	<div class="container">
		<div class="row">
			<!-- _________________________________________________________________________________________________________________ -->
			<!-- Property Detail Content -->
			<div class="col-md-9 col-sm-9">
				<section id="property-detail">
					<!-- _________________________________________________________________________________________________________________ -->
					<header class="property-title">
						<h1>{{ advert.advertTitle }}</h1>
						<figure>Recherche D'une Collocation à {{ advert.town.name }}</figure>
						<span class="actions">
							<a href="#" class="bookmark" data-bookmark-state="empty"><span class="title-add">Add to bookmark</span><span class="title-added">Added</span></a>
						</span>
					</header>
					<!-- _________________________________________________________________________________________________________________ -->
					<section id="property-gallery">
						<div class="owl-carousel property-carousel">
							{% for photo in advert.album.photos %}
								<div class="property-slide">
									<a href="{{ asset('uploads/photos/' ~ photo.path) }}" class="image-popup">
										<div class="overlay"><h3>Front View</h3></div>
										<img alt="" src="{{ asset('uploads/photos/' ~ photo.path) }}">
									</a>
								</div><!-- /.property-slide -->
							{% endfor %}
						</div><!-- /.property-carousel -->
					</section>
					<!-- _________________________________________________________________________________________________________________ -->
					<div class="row">
						<!-- _________________________________________________________________________________________________________________ -->
						<div class="col-md-4 col-sm-12">
							<section id="quick-summary" class="clearfix">
								<header><h2>Resumé</h2></header>
								<h3>Genrale</h3>
								<dl>
									<dt>Code</dt>
									<dd>#{{ advert.id ~ '3' }}</dd>
									<dt>Available Date:</dt>
									<dd>{{ advert.availableDate|date('Y-m-d') }}</dd>
									<dt>Budget:</dt>
									<dd>{{ advert.budget }} <b>TND</b></dd>
									<dt>Periode To Stay:</dt>
									<dd>{{ advert.periodeToStay }} Mois</dd>
								</dl>
								<hr style="border-top: dashed 1px #BBBBBB;" />
									<h3>Self Informations</h3>
									<dl>
										<dt>N° Des Collocataires</dt>
										<dd>{{ advert.numberOfSeekers }}</dd>
										<dt>Sexe</dt>
										<dd>{{ advert.selfPreference.gender.name }}</dd>
										{% if advert.numberOfSeekers > 1 %}
											<dt>Age</dt>
											<dd>{{ advert.selfPreference.ageMin }} à {{ advert.selfPreference.ageMax }}</dd>
										{% else %}
											<dt>Age</dt>
											<dd>{{ advert.selfPreference.ageSolo }}</dd>
										{% endif %}
										<dt>Fumeurs</dt>
										<dd>{% if advert.selfPreference.smocker %}<span class="glyphicon glyphicon-ok" style="color: green;"></span>{% else %}<span class="glyphicon glyphicon-remove" style="color: red;">{% endif %}</dd>
										<dt>Animaux De Compagnie</dt>
										<dd>{% if advert.selfPreference.pet %}<span class="glyphicon glyphicon-ok" style="color: green;"></span>{% else %}<span class="glyphicon glyphicon-remove" style="color: red;">{% endif %}</dd>
										<dt>Universités</dt>
										<dd>
											{% for university in advert.selfPreference.universities %}
												<span class="tag price">{{ university }}</span>
											{% endfor %}
										</dd>
									</dl>
									<hr style="border-top: dashed 1px #BBBBBB;" />
									<h3>Preferences Des Collocataires Cibles</h3>
								<dl>
									<dt>Sexe</dt>
									<dd>{{ advert.targetPreference.gender.name }}</dd>
									<dt>Age</dt>
									<dd>{{ advert.targetPreference.ageMin }} à {{ advert.targetPreference.ageMax }}</dd>
									<dt>Fumeurs</dt>
									<dd>{% if advert.targetPreference.smocker %}<span class="glyphicon glyphicon-ok" style="color: green;"></span>{% else %}<span class="glyphicon glyphicon-remove" style="color: red;">{% endif %}</dd>
									<dt>Animaux De Compagnie</dt>
									<dd>{% if advert.targetPreference.pet %}<span class="glyphicon glyphicon-ok" style="color: green;"></span>{% else %}<span class="glyphicon glyphicon-remove" style="color: red;">{% endif %}</dd>
								</dl>
							</section><!-- /#quick-summary -->
						</div><!-- /.col-md-4 -->
						<!-- _________________________________________________________________________________________________________________ -->
						<div class="col-md-8 col-sm-12">
							<!-- _________________________________________________________________________________________________________________ -->
							<section id="description">
								<header><h2>Property Description</h2></header>
								<p>
									{{ advert.advertDescription }}
								</p>
							</section><!-- /#description -->
							<!-- _________________________________________________________________________________________________________________ -->
							<section id="property-features">
								<header><h2>Property Features</h2></header>
								<ul class="list-unstyled property-features-list">
									{% if advert.featureFurnished %}<li>Meublé</li>{% endif %}
									{% if advert.featureGardenTerrace %}<li>Jardin</li>{% endif %}
									{% if advert.featureParcking %}<li>Parcking</li>{% endif %}
									{% if advert.featureTv %}<li>Tv</li>{% endif %}
									{% if advert.featureWifi %}<li>WIFI</li>{% endif %}
								</ul>
							</section><!-- /#property-features -->
													<!-- _________________________________________________________________________________________________________________ -->
													<section id="property-map">
														<header><h2>Map</h2></header>
														<div class="property-detail-map-wrapper">
															<div class="property-detail-map" id="property-detail-map"></div>
														</div>
													</section><!-- /#property-map -->
													<!-- _________________________________________________________________________________________________________________ -->










<!-- _________________________________________________________________________________________________________________ -->



























												</div><!-- /.col-md-8 -->
												<!-- _________________________________________________________________________________________________________________ -->

												<div class="col-md-12 col-sm-12">
													<section id="contact-agent">
														<header><h2>Contact Agent</h2></header>
														<div class="row">
															<section class="agent-form">
																<div class="col-md-12 col-sm-12">
																	<aside class="agent-info clearfix" style="padding-left: 0px !important;">
																		<div class="agent-contact-info">
																			<h3>{{ advert.advertiser.firstName }} {{ advert.advertiser.lastName }}</h3>
																			<dl>
																				<dt>Phone:</dt>
																				<dd>+216 - {{ advert.advertiserPhone }}</dd>
																				<dt>Email:</dt>
																				<dd><a href="mailto:#">{{ advert.advertiser.email }}</a></dd>
																			</dl>
																			<hr style="border-top: dashed 1px #BBBBBB;margin-bottom: 20px;margin-top: 20px;" />
																		</div>
																	</aside><!-- /.agent-info -->
																</div><!-- /.col-md-7 -->
																<div class="col-md-12 col-sm-12">
																	<div class="agent-form">
																		<form role="form" id="form-contact-agent" method="post" class="clearfix">
																			<div class="form-group">
																				<label for="form-contact-agent-name">Your Name<em>*</em></label>
																				<input type="text" class="form-control" id="form-contact-agent-name" name="form-contact-agent-name" required="">
																			</div><!-- /.form-group -->
																			<div class="form-group">
																				<label for="form-contact-agent-email">Your Email<em>*</em></label>
																				<input type="email" class="form-control" id="form-contact-agent-email" name="form-contact-agent-email" required="">
																			</div><!-- /.form-group -->
																			<div class="form-group">
																				<label for="form-contact-agent-message">Your Message<em>*</em></label>
																				<textarea class="form-control" id="form-contact-agent-message" rows="4" name="form-contact-agent-message" required=""></textarea>
																			</div><!-- /.form-group -->
																			<div class="form-group">
																				<button type="submit" class="btn pull-right btn-default" id="form-contact-agent-submit">Send a Message</button>
																			</div><!-- /.form-group -->
																			<div id="form-contact-agent-status"></div>
																		</form><!-- /#form-contact -->
																	</div><!-- /.agent-form -->
																</div><!-- /.col-md-5 -->
															</section><!-- /.agent-form -->
														</div><!-- /.row -->
													</section><!-- /#contact-agent -->
												</div>
												<!-- _________________________________________________________________________________________________________________ -->
											</div><!-- /.row -->
										</section><!-- /#property-detail -->
									</div><!-- /.col-md-9 -->
									<!-- end Property Detail Content -->
									<!-- _________________________________________________________________________________________________________________ -->
									<!-- sidebar -->
									<div class="col-md-3 col-sm-3">
										<section id="sidebar">
											{% include 'PfaMainBundle:Search:searchWidget.html.twig' %}
											{{ render(controller('PfaMainBundle:Widget:featuredAdverts', { 'limit': 3, 'type': 'RoomSeeker' })) }}
											{{ render(controller('PfaMainBundle:Widget:similarAdverts', { 'limit': 3, 'type': 'RoomSeeker', 'id': advert.id })) }}
										</section><!-- /#sidebar -->
									</div><!-- /.col-md-3 -->
									<!-- end Sidebar -->
									<!-- _________________________________________________________________________________________________________________ -->
								</div><!-- /.row -->
							</div><!-- /.container -->
							<!-- _________________________________________________________________________________________________________________ -->
						{% endblock %}
						{% block javascripts %}
							{{ parent() }}
							<!-- _________________________________________________________________________________________________________________ -->
							<script type="text/javascript" src="{{ asset('assets/js/infobox.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/jquery.placeholder.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/jquery.raty.min.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/jshashtable-2.1_src.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/tmpl.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/jquery.dependClass-0.1.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/draggable-0.1.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/jquery.fitvids.js') }}"></script>
							<script type="text/javascript" src="{{ asset('assets/js/jquery.slider.js') }}"></script>
							<!-- _________________________________________________________________________________________________________________ -->
							<script type="text/javascript">
								var raduis = {{ advert.radius }}
								var lat = {{ advert.gmapLat }};
								var lng = {{ advert.gmapLng }};
								var icon = "{{ asset('assets/img/property-types/empty.png') }}";
								///////////////////////////////////////////////////////////////////////////////////////////////////////
								google.maps.event.addDomListener(window, 'load', initMap(lat, lng, icon, raduis));
								///////////////////////////////////////////////////////////////////////////////////////////////////////
								function initMap(lat, lng, icon, radius) {
									var subtractPosition = 0;
									var mapWrapper = $('#property-detail-map.float');
									if (document.documentElement.clientWidth > 1200) {
										subtractPosition = 0.013;
									}
									if (document.documentElement.clientWidth < 1199) {
										subtractPosition = 0.006;
									}
									if (document.documentElement.clientWidth < 979) {
										subtractPosition = 0.001;
									}
									if (document.documentElement.clientWidth < 767) {
										subtractPosition = 0;
									}
									var mapCenter = new google.maps.LatLng(lat,lng);
									if ( $("#property-detail-map").hasClass("float") ) {
										mapCenter = new google.maps.LatLng(lat,lng - subtractPosition);
										mapWrapper.css('width', mapWrapper.width() + mapWrapper.offset().left )
									}
									var mapOptions = {
										zoom: 13,
										center: mapCenter,
										disableDefaultUI: false,
										scrollwheel: false,
										styles: mapStyles
									};
									var mapElement = document.getElementById('property-detail-map');
									var map = new google.maps.Map(mapElement, mapOptions);
									var pictureLabel = document.createElement("img");
									pictureLabel.src = icon;
									var markerPosition = new google.maps.LatLng(lat,lng);
									var marker = new MarkerWithLabel({
										position: markerPosition,
										map: map,
										icon: "{{ asset('assets/img/marker.png') }}",
										labelContent: pictureLabel,
										labelAnchor: new google.maps.Point(50, 0),
										labelClass: "marker-style"
									});
									var radiusCircle = new google.maps.Circle({
										strokeColor: '#1396e2',
										strokeOpacity: 0,
										strokeWeight: 0,
										fillColor: '#1396e2',
										fillOpacity: 0.35,
										map: map,
										center: marker.getPosition(),
										radius: radius * 1000
										});
								}
								///////////////////////////////////////////////////////////////////////////////////////////////////////
								$(window).load(function(){
									initializeOwl(false);
								});
							</script>
						{% endblock %}